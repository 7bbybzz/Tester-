<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StackRacks Empire - Ultimate CC Marketplace</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Roboto', sans-serif; background: linear-gradient(135deg, #f0f4f8, #d9e4f5); color: #333; transition: all 0.3s; overflow-x: hidden; }
    .dark-mode { background: linear-gradient(135deg, #1a1a1a, #2c2c2c); color: #e0e0e0; }
    .hero { background: linear-gradient(135deg, #0d6efd, #6610f2); padding: 150px 0; text-align: center; border-radius: 0 0 30px 30px; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4); }
    .hero h1 { font-size: 3.5em; text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.6); }
    .hero p { font-size: 1.3em; opacity: 0.9; }
    .product-grid { padding: 80px 0; }
    .card {
      background: #fff;
      border: none;
      border-radius: 20px;
      box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1), -5px -5px 15px rgba(255, 255, 255, 0.5);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    .dark-mode .card { background: #2a2a2a; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3), -5px -5px 15px rgba(40, 40, 40, 0.5); }
    .card:hover { transform: scale(1.1); box-shadow: 10px 10px 25px rgba(0, 94, 162, 0.3); }
    .card-title { color: #0d6efd; }
    .card-text { color: #666; }
    .dark-mode .card-title { color: #00d4ff; }
    .dark-mode .card-text { color: #b0b0b0; }
    .btn-primary { background: linear-gradient(45deg, #0d6efd, #6610f2); border: none; transition: all 0.3s; }
    .btn-primary:hover { background: linear-gradient(45deg, #005cbf, #520dc2); transform: translateY(-3px); }
    .cart { position: fixed; top: 20px; right: 20px; width: 350px; background: #fff; border-radius: 20px; padding: 15px; z-index: 1000; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1); transition: opacity 0.3s; }
    .dark-mode .cart { background: #2a2a2a; }
    .cart.hidden { opacity: 0; pointer-events: none; }
    .reviews { margin-top: 10px; padding: 10px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
    .review-input { width: 100%; margin-top: 5px; padding: 8px; border-radius: 10px; border: 1px solid #0d6efd; background: rgba(255, 255, 255, 0.2); color: #333; transition: all 0.3s; }
    .dark-mode .review-input { border-color: #00d4ff; background: rgba(0, 0, 0, 0.2); color: #e0e0e0; }
    .review-input:focus { border-color: #00d4ff; box-shadow: 0 0 10px rgba(0, 212, 255, 0.5); }
    footer { background: #343a40; padding: 20px; text-align: center; border-radius: 30px 30px 0 0; box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.3); }
    .dark-mode footer { background: #1a1a1a; }
    .search-bar { margin: 20px 0; position: relative; }
    .search-bar input { width: 100%; padding: 12px 50px 12px 20px; border-radius: 25px; border: 2px solid #0d6efd; background: rgba(255, 255, 255, 0.1); color: #333; transition: all 0.3s; }
    .dark-mode .search-bar input { border-color: #00d4ff; background: rgba(0, 0, 0, 0.1); color: #e0e0e0; }
    .search-bar input:focus { border-color: #00d4ff; box-shadow: 0 0 15px rgba(0, 212, 255, 0.5); }
    .search-bar::after { content: 'üîç'; position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #0d6efd; font-size: 1.2em; }
    .dark-mode .search-bar::after { color: #00d4ff; }
    .filter-section { margin: 20px 0; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 20px; }
    .dark-mode .filter-section { background: rgba(0, 0, 0, 0.1); }
    .profile { position: fixed; top: 20px; left: 20px; background: #fff; padding: 10px; border-radius: 20px; box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1); }
    .dark-mode .profile { background: #2a2a2a; }
    .carousel-inner { border-radius: 20px; overflow: hidden; }
    @media (max-width: 768px) {
      .hero { padding: 100px 0; }
      .hero h1 { font-size: 2.5em; }
      .cart { width: 90%; left: 5%; right: 5%; }
      .profile { left: 5px; top: 5px; }
    }
  </style>
</head>
<body>
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1>StackRacks Empire</h1>
      <p class="lead">The Ultimate Marketplace for CCs, Fullz, Crypto & More</p>
      <button class="btn btn-light btn-lg" onclick="scrollToProducts()">Dive In</button>
    </div>
  </section>

  <!-- User Profile -->
  <div class="profile" id="profile">
    <h6 id="userName">Guest</h6>
    <p id="purchaseHistory">No purchases</p>
  </div>

  <!-- Search & Filter -->
  <section class="container">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search items..." oninput="searchProducts()">
    </div>
    <div class="filter-section">
      <h5>Filters</h5>
      <button class="btn btn-primary me-2" onclick="filterProducts('all')">All</button>
      <button class="btn btn-primary me-2" onclick="filterProducts('cc')">CCs</button>
      <button class="btn btn-primary me-2" onclick="filterProducts('gift')">Gift Cards</button>
      <button class="btn btn-primary me-2" onclick="filterProducts('crypto')">Crypto Packs</button>
      <button class="btn btn-primary me-2" onclick="filterProducts('fullz')">Fullz</button>
      <button class="btn btn-primary me-2" onclick="filterProducts('tools')">Tools</button>
      <label>Price: <span id="priceValue">$10 - $500</span></label>
      <input type="range" min="10" max="500" value="500" oninput="filterByPrice(this.value)">
      <label>Balance: <span id="balanceValue">$0 - $10000</span></label>
      <input type="range" min="0" max="10000" value="10000" oninput="filterByBalance(this.value)">
    </div>
  </section>

  <!-- Product Grid -->
  <section class="product-grid">
    <div class="container">
      <h2 class="text-center mb-4">Latest Deals</h2>
      <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner" id="productGrid">
          <!-- Dynamic products loaded via JS -->
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
      </div>
    </div>
  </section>

  <!-- Cart -->
  <div class="cart hidden" id="cart">
    <h5>Cart (<span id="cartCount">0</span>)</h5>
    <ul id="cartItems" class="list-unstyled"></ul>
    <button class="btn btn-success w-100 mt-2" onclick="checkout()">Buy on Telegram</button>
  </div>

  <!-- Live Chat Mockup -->
  <div id="chatWidget" style="position: fixed; bottom: 20px; right: 20px; width: 300px; background: #fff; padding: 10px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.2); display: none;">
    <h6>Live Chat</h6>
    <p>Connect with @rakrunnin</p>
    <button class="btn btn-primary btn-sm" onclick="toggleChat()">Toggle</button>
  </div>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 StackRacks Empire. DM @rakrunnin for support.</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Mock data
    const products = {
      cc: Array(60).fill().map((_, i) => ({
        id: i + 1, name: `Visa ${i % 5 === 0 ? 'Platinum' : i % 3 === 0 ? 'Gold' : 'Classic'}`, price: Math.floor(Math.random() * 490 + 10), type: 'cc', balance: Math.floor(Math.random() * 9500 + 500), desc: 'High limit CC', reviews: []
      })).concat(Array(60).fill().map((_, i) => ({
        id: i + 61, name: `MasterCard ${i % 5 === 0 ? 'World' : i % 3 === 0 ? 'Elite' : 'Standard'}`, price: Math.floor(Math.random() * 490 + 10), type: 'cc', balance: Math.floor(Math.random() * 9500 + 500), desc: 'Cashout ready', reviews: []
      }))),
      gift: Array(50).fill().map((_, i) => ({
        id: i + 121, name: `Amazon Gift Card $${(i % 5 + 1) * 100}`, price: Math.floor(Math.random() * 90 + 10), type: 'gift', balance: (i % 5 + 1) * 100, desc: 'Instant use', reviews: []
      })).concat(Array(50).fill().map((_, i) => ({
        id: i + 171, name: `Walmart Gift Card $${(i % 5 + 1) * 50}`, price: Math.floor(Math.random() * 90 + 10), type: 'gift', balance: (i % 5 + 1) * 50, desc: 'Shop anywhere', reviews: []
      }))),
      crypto: Array(40).fill().map((_, i) => ({
        id: i + 221, name: `BTC Pack ${i % 3 + 1} mBTC`, price: Math.floor(Math.random() * 290 + 50), type: 'crypto', balance: (i % 3 + 1) * 1000, desc: 'Crypto wallet seed', reviews: []
      })).concat(Array(40).fill().map((_, i) => ({
        id: i + 261, name: `ETH Pack ${i % 3 + 1} mETH`, price: Math.floor(Math.random() * 290 + 50), type: 'crypto', balance: (i % 3 + 1) * 500, desc: 'Ethereum keys', reviews: []
      }))),
      fullz: Array(30).fill().map((_, i) => ({
        id: i + 301, name: `Fullz Pack ${i + 1}`, price: Math.floor(Math.random() * 190 + 20), type: 'fullz', balance: 0, desc: 'SSN + ID', reviews: []
      })),
      tools: Array(20).fill().map((_, i) => ({
        id: i + 331, name: `Tool ${i + 1} (Keylogger)`, price: Math.floor(Math.random() * 390 + 50), type: 'tools', balance: 0, desc: 'Remote access', reviews: []
      })).concat(Array(20).fill().map((_, i) => ({
        id: i + 351, name: `Tool ${i + 21} (RAT)`, price: Math.floor(Math.random() * 390 + 50), type: 'tools', balance: 0, desc: 'Device control', reviews: []
      })))
    };

    const reviewPool = [
      'Worked like a charm, cashed out $2000!', 'Visa hit Amazon, minor OTP issue but fixed.',
      'Amex was elite, bought luxury goods no cap!', 'MasterCard failed once, second try green.',
      'Fast delivery, used it for online shopping.', 'Gift card redeemed instantly, no issues!',
      'BTC pack was smooth, transferred easily.', 'Fullz opened a bank account after tweaks.',
      'Tool setup took time but worked great!', 'Crypto pack hit the wallet fast!'
    ];

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let users = JSON.parse(localStorage.getItem('users')) || {};
    let currentUser = localStorage.getItem('currentUser') || null;
    let isCartVisible = false;

    // Initialize random reviews
    function initReviews() {
      Object.values(products).flat().forEach(p => {
        const reviewCount = Math.floor(Math.random() * 4) + 1;
        for (let i = 0; i < reviewCount; i++) {
          p.reviews.push({ text: reviewPool[Math.floor(Math.random() * reviewPool.length)], user: `User${Math.floor(Math.random() * 1000)}` });
        }
      });
    }

    initReviews();

    function renderProducts(filter = 'all', search = '', priceMax = 500, balanceMax = 10000) {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = '';
      const allProducts = Object.values(products).flat();
      const filtered = allProducts.filter(p =>
        (filter === 'all' || p.type === filter) &&
        (search === '' || p.name.toLowerCase().includes(search.toLowerCase())) &&
        p.price <= priceMax &&
        (p.balance === 0 || p.balance <= balanceMax)
      );
      filtered.forEach((product, i) => {
        if (i % 3 === 0) {
          const item = document.createElement('div');
          item.className = 'carousel-item' + (i === 0 ? ' active' : '');
          item.innerHTML = `<div class="row">${filtered.slice(i, i + 3).map(p => `
            <div class="col-md-4 mb-4">
              <div class="card p-3">
                <div class="card-body">
                  <h5 class="card-title">${p.name}</h5>
                  <p class="card-text">${p.desc} | ${p.balance ? `Balance: $${p.balance}` : 'N/A'}</p>
                  <p class="card-text fw-bold text-success">$${p.price}</p>
                  <div class="reviews">
                    ${p.reviews.map(r => `<small><i>${r.user}: ${r.text}</i></small><br>`).join('')}
                    ${currentUser ? `<input type="text" class="review-input" id="review-${p.id}" placeholder="Add review...">
                    <button class="btn btn-sm btn-info mt-1" onclick="addReview(${p.id})">Post</button>` : ''}
                  </div>
                  <div class="input-group mt-2">
                    <button class="btn btn-secondary" onclick="adjustQuantity(${p.id}, -1)">-</button>
                    <input type="number" id="qty-${p.id}" class="form-control text-center" value="1" min="1" style="width: 60px;">
                    <button class="btn btn-secondary" onclick="adjustQuantity(${p.id}, 1)">+</button>
                    <button class="btn btn-primary ms-2" onclick="addToCart(${p.id})">Add to Cart</button>
                  </div>
                </div>
              </div>
            </div>
          `).join('')}</div>`;
          grid.appendChild(item);
        }
      });
    }

    function addToCart(id) {
      const product = Object.values(products).flat().find(p => p.id === id);
      const qty = parseInt(document.getElementById(`qty-${id}`).value);
      for (let i = 0; i < qty; i++) cart.push(product);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
      showPopup(`Added ${qty}x ${product.name} to cart!`);
    }

    function adjustQuantity(id, delta) {
      const input = document.getElementById(`qty-${id}`);
      let qty = parseInt(input.value) + delta;
      input.value = Math.max(1, qty);
    }

    function addReview(id) {
      const input = document.getElementById(`review-${id}`);
      const review = input.value.trim();
      if (review && currentUser) {
        const product = Object.values(products).flat().find(p => p.id === id);
        product.reviews.push({ text: review, user: currentUser });
        input.value = '';
        renderProducts();
      } else if (!currentUser) {
        showPopup('Login to review!');
      }
    }

    function updateCart() {
      document.getElementById('cartCount').textContent = cart.length;
      const items = document.getElementById('cartItems');
      const grouped = cart.reduce((acc, item) => {
        acc[item.id] = (acc[item.id] || 0) + 1;
        return acc;
      }, {});
      items.innerHTML = Object.entries(grouped).map(([id, qty]) => {
        const product = Object.values(products).flat().find(p => p.id === parseInt(id));
        return `<li>${product.name} x${qty} - $${product.price * qty} <button class="btn btn-sm btn-danger" onclick="removeFromCart(${id})">Remove</button></li>`;
      }).join('');
      document.getElementById('cart').className = `cart ${cart.length > 0 ? '' : 'hidden'}`;
    }

    function removeFromCart(id) {
      cart = cart.filter(item => item.id !== id);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
    }

    function filterProducts(type) {
      renderProducts(type, document.getElementById('searchInput').value, parseInt(document.getElementById('priceRange').value), parseInt(document.getElementById('balanceRange').value));
    }

    function searchProducts() {
      const search = document.getElementById('searchInput').value;
      renderProducts('all', search, parseInt(document.getElementById('priceRange').value), parseInt(document.getElementById('balanceRange').value));
    }

    function filterByPrice(value) {
      document.getElementById('priceValue').textContent = `$10 - $${value}`;
      renderProducts('all', document.getElementById('searchInput').value, value, parseInt(document.getElementById('balanceRange').value));
    }

    function filterByBalance(value) {
      document.getElementById('balanceValue').textContent = `$0 - $${value}`;
      renderProducts('all', document.getElementById('searchInput').value, parseInt(document.getElementById('priceRange').value), value);
    }

    function checkout() {
      if (cart.length === 0) {
        showPopup('Cart empty!');
        return;
      }
      const total = cart.reduce((sum, item) => sum + item.price, 0);
      showPopup(`Redirecting to Telegram... Total: $${total}`);
      setTimeout(() => window.open('https://t.me/rakrunnin', '_blank'), 1000);
    }

    function scrollToProducts() {
      document.querySelector('.product-grid').scrollIntoView({ behavior: 'smooth' });
    }

    function showPopup(message) {
      const popup = document.createElement('div');
      popup.className = 'position-fixed bottom-0 end-0 m-3 p-2 bg-primary text-white rounded shadow';
      popup.textContent = message;
      document.body.appendChild(popup);
      setTimeout(() => popup.remove(), 3000);
    }

    function login() {
      const username = prompt('Enter username:');
      if (username) {
        if (!users[username]) users[username] = { purchases: [] };
        currentUser = username;
        localStorage.setItem('currentUser', username);
        localStorage.setItem('users', JSON.stringify(users));
        document.getElementById('userName').textContent = `User: ${username}`;
        updateProfile();
      }
    }

    function logout() {
      currentUser = null;
      localStorage.removeItem('currentUser');
      document.getElementById('userName').textContent = 'Guest';
      document.getElementById('purchaseHistory').textContent = 'No purchases';
    }

    function updateProfile() {
      if (currentUser) {
        const user = users[currentUser];
        document.getElementById('purchaseHistory').textContent = `Purchases: ${user.purchases.length} items`;
      }
    }

    function toggleChat() {
      document.getElementById('chatWidget').style.display = document.getElementById('chatWidget').style.display === 'block' ? 'none' : 'block';
    }

    // Dark mode toggle
    document.body.addEventListener('dblclick', () => {
      document.body.classList.toggle('dark-mode');
    });

    // Initial load
    document.getElementById('profile').innerHTML += '<button class="btn btn-sm btn-primary mt-2" onclick="login()">Login</button><button class="btn btn-sm btn-danger mt-2" onclick="logout()">Logout</button>';
    renderProducts();
    updateCart();
    updateProfile();
    document.getElementById('priceRange').value = 500;
    document.getElementById('balanceRange').value = 10000;
  </script>
</body>
</html>
